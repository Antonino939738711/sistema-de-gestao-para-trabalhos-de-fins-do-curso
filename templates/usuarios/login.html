{% load static %}
<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>SGTFC</title>
  <script src="{% static 'css/3.4.js' %}"></script>
  <link rel="stylesheet" href="{% static 'css/login.css' %}">
  <style>
    /* Loader tela cheia */
    #loader {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #0f766e, #14b8a6);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 50;
      transition: opacity 0.8s ease, visibility 0.8s ease;
      color: white;
      text-align: center;
      padding: 20px;
    }
    #loader.fade-out {
      opacity: 0;
      visibility: hidden;
    }
    /* Logo */
    #loader img {
      width: 100px;
      height: 100px;
      margin-bottom: 20px;
      background: white;
      border-radius: 50%;
      padding: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    /* Nome do sistema */
    #loader h1 {
      font-size: 2rem;
      font-weight: 800;
      letter-spacing: 2px;
      margin-bottom: 10px;
    }
    #loader p {
      font-size: 1rem;
      opacity: 0.9;
      margin-bottom: 30px;
    }
   
    .spinner {
      width: 60px;
      height: 60px;
      border: 6px solid rgba(255,255,255,0.3);
      border-top: 6px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

  <!-- Loader -->
  <div id="loader">
    <img src="{% static 'imgs/icons/finalispbie.jpg' %}" alt="Logo">
    <h1>SGTFC</h1>
    <p>SISTEMA DE GESTAO PARA TRABLAHOS DE FINS DE CURSO</p>
    <div class="spinner"></div>
  </div>

  <!-- Conteúdo principal (apenas o formulário) -->
  <div id="loginContainer" class="w-full max-w-md bg-white rounded-2xl shadow-xl p-8 opacity-0 transition-opacity duration-700">
    
    
      <div class="text-center mb-8">
      <img src="{% static 'imgs/icons/finalispbie.jpg' %}" alt="Login SGTFC"
           class="mx-auto w-28 h-28 rounded-full shadow-lg border-4 border-white-600 bg-black p-2">
    </div>

    {% if messages %}
      <div class="mb-4 space-y-2">
        {% for message in messages %}
          <div class="px-4 py-2 rounded text-sm text-center
                      {% if message.tags == 'error' %} bg-red-100 border border-red-400 text-red-700 
                      {% elif message.tags == 'success' %} bg-green-100 border border-green-400 text-green-700  
                      {% else %} bg-gray-100 border border-gray-400 text-gray-700 {% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" class="space-y-4">
      {% csrf_token %}

      <div>
        <label class="block text-sm font-medium text-gray-700">Email</label>
        <input type="email" name="username" value="{{ form.username.value|default_if_none:'' }}" required
               class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-teal-300">
      </div>

      <div class="relative">
        <label class="block text-sm font-medium text-gray-700">Senha</label>
        <input type="password" name="senha" id="senha" required
               class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-teal-300">
        <button type="button" id="togglePwd"
                class="absolute right-3 top-9 text-gray-600">
          <img id="iconEye" src="{% static 'imgs/eye-off.png' %}" alt="Mostrar senha" class="w-5 h-5">
        </button>
      </div>

      <button type="submit"
              class="w-full bg-teal-600 hover:bg-teal-700 text-white py-2 rounded-lg transition">
        Entrar
      </button>
    </form>

    <p class="mt-4 text-sm text-gray-600 text-center">
      Não tem conta?
      <a href="{% url 'cadastro' %}" class="text-teal-600 font-semibold hover:underline">
        Cadastrar
      </a>
    </p>
  </div>

  <!-- Scripts -->
  <script>
    // Mostrar/Ocultar senha
    const togglePwd = document.getElementById("togglePwd");
    const senhaInput = document.getElementById("senha");
    const iconEye = document.getElementById("iconEye");

    togglePwd.addEventListener("click", () => {
      if (senhaInput.type === "password") {
        senhaInput.type = "text";
        iconEye.src = "{% static 'imgs/eye.png' %}";
        iconEye.alt = "Ocultar senha";
      } else {
        senhaInput.type = "password";
        iconEye.src = "{% static 'imgs/eye-off.png' %}";
        iconEye.alt = "Mostrar senha";
      }
    });

    // Loader → Login com transição
    window.addEventListener("load", () => {
      const loader = document.getElementById("loader");
      const login = document.getElementById("loginContainer");

      setTimeout(() => {
        loader.classList.add("fade-out");
        login.classList.remove("opacity-0");
        login.classList.add("opacity-100");
      }, 1500); // tempo do loader (1.5s)
    });
  </script>
</body>
</html>
